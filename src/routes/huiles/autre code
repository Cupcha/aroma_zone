

<script>
  // Importation de la fonction `onMount` depuis Svelte et de l'objet `supabase` depuis le fichier "../config/supabaseProduct"
  import { onMount } from 'svelte';
  import supabase from "../supabase.js"

  // Déclaration des variables d'état `fetchError` et `Huile` avec la syntaxe `let`
  let fetchError = null;
  let Huile = null;

  // Utilisation de la fonction `onMount` pour effectuer une action une fois que le composant est monté
  onMount(async () => {
    try {
      // Récupération des données de la table `Huile` depuis Supabase
      const { data, error } = await supabase
        .from('Huile')
        .select();

      // Gestion des erreurs
      if (error) {
        fetchError = 'Could not fetch the Product';
        Huile = null;
        console.log(error);
      }

      // Si les données sont récupérées avec succès, stockage dans la variable d'état `Huile`
      if (data) {
        Huile = data;
        fetchError = null;
      }
    } catch (error) {
      // Gestion des erreurs
      fetchError = 'Could not fetch the Product';
      Huile = null;
      console.log(error);
    }
  });
</script>

<!-- Affichage des données récupérées -->
<div>
  {#if fetchError}
    <!-- Si une erreur est survenue, affichage du message d'erreur -->
    <p>{fetchError}</p>
  {:else if Huile}
    <!-- Si les données sont récupérées avec succès, affichage de chaque élément de la liste `Huile` -->
    <diwv>
      <!-- Tri des éléments par ordre -->
      <div>
        {#each Huile as item (item.id)}
          <div>
            <h3>{item.name}</h3>
            <h5>Description: {item.description}</h5>
            <p>Ingrédients: {item.ingredient}</p>
            <div>{item.price}€</div>
          </div>
        {/each}
      </div>
    </div>
  {/if}
</div>




<!-- <script>
	import supabase from '../supabase.js';
    

	async function getData() {
  	const { data, error } = await supabase
    .from('Huile')
    .select()
  	if (error) throw new Error(error.message)
  
  return data
};
</script>

<div>
<h1>My favvorite games</h1>
{#await getData()}
  <p>Fetching data...</p>
{:then data}
  {#each data as game}
    <li>{game.name}</li>
  {/each}
{:catch error}
  <p>Something went wrong while fetching the data:</p>
  <pre>{error}</pre>
{/await}

</div>  -->