
<script>
	import { onMount } from 'svelte';
	import supabase from '../supabase';
	import { writable } from 'svelte/store';
  
	//let fetchError = writable(null);
	let huile = writable(null);
  
	onMount(async () => {
	  const { data, error } = await supabase
		.from('Huile')
		.select();
  
	  if (error) {
		fetchError = 'Could not fetch the Product';
		huile = null;
		console.log(error);
	  }
	  if (data) {
		huile = data;
		fetchError = null;
	  }
	});
  </script>
  
  <div>
	{#if fetchError}
	  <p>{fetchError}</p>
	{/if}
	{#if huile}
	  <div>
		<!-- order-by buttons -->
		<div>
		  {#each huile as h, index}
			<div key={index}>
			  <h3>{h.name}</h3>
			  <img src={h.picture} alt='Huile'/>
			  <h5>Description: {h.description}</h5>
			  <p>Ingrédients: {h.ingredient}</p>
			  <p>Propriétés: {h.properties}</p>
			  <div>{h.price}€</div>
			</div>
		  {/each}
		</div>
	  </div>
	{/if}
  </div>
  













<script>
	import supabase from '../supabase.js';
    

	async function getData() {
  	const { data, error } = await supabase
    .from('Huile')
    .select()
  	if (error) throw new Error(error.message)
  
  return data
};
</script>

<div>
<h1>My favvorite games</h1>
{#await getData()}
  <p>Fetching data...</p>
{:then data}
  {#each data as game}
    <li>{game.name}</li>
  {/each}
{:catch error}
  <p>Something went wrong while fetching the data:</p>
  <pre>{error}</pre>
{/await}

</div> 
  
  

<svelte:head>
	<title>AROMA-ZONE</title>
	<meta name="liste_touslesproduits" content="List products shop Aroma-zone, IE=edge, width=device-width, initial-scale=1.0">
	<script src="https://cdn.tailwindcss.com"></script>

</svelte:head>

<body class="home w-full fixed">

	<div id="container" class="bg-gray-200">
		<product-facet>
			
			<h1 class="font-bold text-center text-4xl py-7 ">TOUS LES PRODUITS</h1>
			
			<div id="facet-main">
				<div id="nb-products" class="text-center text-xl">
					<span>50 products</span>
				</div>
			</div>

		</product-facet>
	</div>

</body>



<script>
	import supabase from "../supabase";
  
	let fetchError = null;
	let Huile = null;
  
	onMount(async () => {
	  try {
		const { data, error } = await supabase
		  .from('Huile')
		  .select();
    console.log(data)
		if (error) {
		  fetchError = 'Could not fetch the Product';
		  Huile = null;
		  console.log(error);
		} else {
		  Huile = data;
		  fetchError = null;
		}
	  } catch (error) {
		  fetchError = 'Could not fetch the Product';
		  Huile = null;
		  console.log(error);
	  }
	});
</script>
  

<div>
	{fetchError && <p>{fetchError}</p>}
	{Huile && (
	  <div>
		{/* order-by buttons */}
		<div>
		  {Huile.map(Huile => (
			//<HuilePage key={Huile.id} Huile={Huile} />
			<div>
		  <h3> {Huile.name}</h3>
		  <img src={Huile.picture} alt='Huile'>
		  <h5> Description: {Huile.description}</h5>
		  <p> Ingrédients: {Huile.ingredient} </p>
		  <p> Propriétés: {Huile.properties} </p>
		  <div> { Huile.price}€</div>

	  </div>
		  ))}
		</div>
	  </div>
	)}
  </div>


  {#if fetchError}
	<p>{fetchError}</p>
  {/if}
  {#if Huile}
	<div>
	  <!-- order-by buttons -->
	  <div>
		{#each Huile as item (item.id)}
		  <div>
			<h3>{item.name}</h3>
			<img src={item.picture} alt='Huile'>
			<h5>Description: {item.description}</h5>
			<p>Ingrédients: {item.ingredient}</p>
			<p>Propriétés: {item.properties}</p>
			<div>{item.price}€</div>
		  </div>
		{/each}
	  </div>
	</div>
  {/if}
  


  